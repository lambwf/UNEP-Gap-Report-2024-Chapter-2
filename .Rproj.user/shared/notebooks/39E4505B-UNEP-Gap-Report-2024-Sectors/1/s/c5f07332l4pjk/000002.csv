"0",""
"0","wd_iea <- read.csv(""sources/not public/WBAL_17052024175316637.csv"")"
"0","wd_iea <- wd_iea %>% "
"0","  mutate(sector=Flow) %>% "
"0","  mutate(sector=ifelse(sector==""Residential"",""Buildings"",sector)) %>% "
"0","  mutate(sector=ifelse(sector==""Commercial and public services"",""Buildings"",sector)) %>% "
"0","  select(country=Country,sector,product=Product,year=Time,value=Value)"
"0","wd_iea <- wd_iea %>% "
"0","  filter(year>=1990)"
"0",""
"0","# iea_industry <- read.xlsx(""sources/not public/iea_web_2021.xlsx"",sheet=1)"
"0","# iea_transport <- read.xlsx(""sources/not public/iea_web_2021.xlsx"",sheet=2)"
"0","# iea_residential <- read.xlsx(""sources/not public/iea_web_2021.xlsx"",sheet=3)"
"0","# iea_commercial <- read.xlsx(""sources/not public/iea_web_2021.xlsx"",sheet=4)"
"0","# "
"0","# wd_iea <- rbind(iea_industry %>% mutate(sector=""Industry""),"
"0","#                 iea_transport %>% mutate(sector=""Transport""))"
"0","# wd_iea <- rbind(wd_iea,iea_residential %>% mutate(sector=""Buildings""))"
"0","# wd_iea <- rbind(wd_iea,iea_commercial %>% mutate(sector=""Buildings""))"
"0","# "
"0","# wd_iea <- gather(wd_iea,year,value,`1960`:`2019`)"
"0","# wd_iea <- wd_iea %>% "
"0","#   rename(country=COUNTRY,product=PRODUCT) %>% "
"0","#   mutate(value=as.numeric(value)) %>% "
"0","#   mutate(year=as.numeric(year)) %>% "
"0","#   filter(year>=1990)"
"0","  "
"0","wd_iea <- wd_iea %>% "
"0","  group_by(country,sector,product,year) %>%"
"0","  summarise(value=sum(value,na.rm=T)) %>% "
"0","  arrange(country,sector,product)"
"1","[38;5;232m`summarise()` has grouped output by 'country', 'sector', 'product'. You can override using the `.groups` argument.[39m
"
"0","  "
"0","write.xlsx(wd_iea %>% "
"0","  filter(country==""World"") %>% "
"0","  filter(year==2019),""cc_iea_product_split.xlsx"")"
"0",""
"0","cc_products <- read.xlsx(""Sources/cc_iea_product_split.xlsx"")"
"0",""
"0","wd_iea <- left_join(wd_iea,cc_products %>% select(sector,product,category))"
"1","[38;5;232mJoining with `by = join_by(sector, product)`[39m
"
"0","wd_iea <- wd_iea %>% "
"0","  filter(!is.na(category)) %>%"
"0","  mutate(units=""EJ"") %>% "
"0","  group_by(country,sector,category,units,year) %>% "
"0","  summarise(value=sum(value)/1e6)"
"1","[38;5;232m`summarise()` has grouped output by 'country', 'sector', 'category', 'units'. You can override using the `.groups` argument.[39m
"
"0","blarg <- wd_iea %>% "
"0","  filter(country==""World"") %>% "
"0","  filter(year==2022)"
"0",""
